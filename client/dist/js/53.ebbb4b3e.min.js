"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[53],{24417:(e,t,a)=>{a.d(t,{a:()=>c});var l=a(63696),n=a(59394),r=a(23338),i=a(75855);const c=e=>e.isFetching?l.createElement(n.a,null,l.createElement(r.y,null)):e.fetchError?l.createElement(i.q,null):e.children},33872:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var l=a(63696),n=a(49348),r=a(2620),i=a(68430),c=a(98261),s=a(75530),o=a(48783),m=a(80876),u=a(24417),d=a(52302),E=a(69935),v=a(47883);a(91728);const h=({source:e,isFetching:t,fetchError:a,height:n="sizeToFit"})=>{const[r,i]=l.useMemo((()=>e?"object"==typeof e?[JSON.stringify(e,null,2),v.T.json]:"string"==typeof e?[e,v.T.plaintext]:["Not supported format",v.T.plaintext]:[e,void 0]),[e]);return l.createElement(l.Fragment,null,l.createElement(u.a,{isFetching:t,fetchError:a},r&&l.createElement(v.B,{isDarkTheme:!0,isLineNumbersVisible:!0,isReadOnly:!0,isMinimapVisible:!0,isLanguageLabelVisible:!0,code:r??"",language:i,height:n})))},y=({advisoryId:e,height:t="sizeToFit"})=>{const{source:a,isFetching:n,fetchError:r}=(0,E.qF)(e);return l.createElement(l.Fragment,null,l.createElement(h,{source:a,isFetching:n,fetchError:r,height:t}))};var g=a(23713),p=a(38914),b=a(57901),f=a(76072),F=a(97299),S=a(17327),k=a(64361),q=a(71603),N=a(65753),C=a(24974),I=a(21639),K=a(3939),_=a(77635),w=a(40360),A=a(10410),T=a(80254),O=a(88112),j=a(85278),x=a(94279),B=a(16172),L=a(20061);const V=({value:e})=>l.createElement(x.B8,{isPlain:!0},e.map(((e,t)=>l.createElement(B.c,{key:t},l.createElement(L.Ck,{isReadOnly:!0,hoverTip:"Copy",clickTip:"Copied"},e)))));var Z=a(67837),H=a(50705);const J=({advisory:e})=>{const{pushNotification:t}=l.useContext(H.K),[a,n]=l.useState(!1),{mutate:r}=(0,E.uJ)((()=>{}),(e=>{t({title:"Error while updating labels",variant:"danger"})}));return l.createElement(l.Fragment,null,l.createElement(p.B,{hasGutter:!0},l.createElement(b.a,null,l.createElement(f.x,{hasGutter:!0},l.createElement(F.E,{md:4},l.createElement(S.Z,{isFullHeight:!0},l.createElement(k.Z,null,"General view"),l.createElement(q.b,null,l.createElement(T.V,{advisory:e})))),l.createElement(F.E,{md:4},l.createElement(S.Z,{isFullHeight:!0},l.createElement(k.Z,null,"Issuer"),l.createElement(q.b,null,l.createElement(O.N,{value:e})))),l.createElement(F.E,{md:4},l.createElement(S.Z,{isFullHeight:!0},l.createElement(k.Z,null,"System"),l.createElement(q.b,null,l.createElement(N.B,null,l.createElement(C.W,null,l.createElement(I.X,null,"Hashes"),l.createElement(K.d,null,e.hashes&&l.createElement(V,{value:e.hashes}))),l.createElement(C.W,null,l.createElement(I.X,null,"Labels ","",l.createElement(_.$n,{variant:_.Ak.link,size:"sm",icon:l.createElement(A.Ay,null),iconPosition:"end",onClick:()=>n(!0)},"Edit")),l.createElement(K.d,null,l.createElement("div",{className:"pf-v5-c-form"},l.createElement(w.g,null,l.createElement("div",{className:"pf-v5-c-form-control",style:{padding:10}},e.labels&&l.createElement(Z.g,{defaultIsOpen:!0,value:e.labels}))))))))))))),a&&l.createElement(j.x,{resourceName:e.identifier,value:e.labels??{},onSave:t=>{(t=>{r({...e,labels:t})})(t),n(!1)},onClose:()=>n(!1)}))};var z=a(32343);const D=()=>{const e=(0,m.Lu)(m.vO.ADVISORY_ID),{advisory:t,isFetching:a,fetchError:v}=(0,E.vy)(e),{downloadAdvisory:h}=(0,g.m)();return l.createElement(l.Fragment,null,l.createElement(i.d8,{variant:"light"},l.createElement(r.A,{breadcrumbs:l.createElement(c.Q,null,l.createElement(s.J,{key:"advisories"},l.createElement(n.N_,{to:"/advisories"},"Advisories")),l.createElement(s.J,{isActive:!0},"Advisory details")),actionButtons:[{children:l.createElement(l.Fragment,null,l.createElement(o.Ay,null)," Download"),variant:"secondary",onClick:()=>{e&&h(e,`${t?.identifier}.json`)}}],pageHeading:{title:t?.identifier??"",label:t?.average_severity?{children:l.createElement(d.h,{value:t.average_severity}),isCompact:!0}:void 0},tabs:[{eventKey:"overview",title:"Overview",children:l.createElement("div",{className:"pf-v5-u-m-md"},l.createElement(u.a,{isFetching:a,fetchError:v},t&&l.createElement(J,{advisory:t})))},{eventKey:"vulnerabilities",title:"Vulnerabilities",children:l.createElement("div",{className:"pf-v5-u-m-md"},l.createElement(u.a,{isFetching:a,fetchError:v},l.createElement(z.j,{enableToolbar:!0,vulnerabilities:t?.vulnerabilities||[]})))},{eventKey:"source",title:"Source",children:l.createElement("div",{className:"pf-v5-u-m-md"},e&&l.createElement(y,{advisoryId:e,height:"645px"}))}]})))}},6841:(e,t,a)=>{a.d(t,{S:()=>n,q:()=>l});const l=async e=>(await e).data,n=e=>({isFetching:e.isLoading,fetchError:e.error,refetch:e.refetch})},91728:(e,t,a)=>{a.d(t,{Qr:()=>p,cF:()=>g,i$:()=>E,l6:()=>h,rj:()=>v,sn:()=>y});var l=a(7616),n=a(26667),r=a(3715),i=a(24808),c=a(40752),s=a(77347),o=a(6841),m=a(81230),u=a(70611);const d="sboms",E=(e={},t=!1)=>{const a=(0,l.I)({queryKey:[d,e],queryFn:()=>(0,c.z1)({client:s.S,query:{...(0,u.kd)(e)}}),refetchInterval:!t&&5e3});return{...(0,o.S)(a),result:{data:a.data?.data.items||[],total:a.data?.data.total??0,params:e}}},v=e=>{const t=(0,l.I)({queryKey:[d,e],queryFn:()=>(0,o.q)((0,c.a7)({client:s.S,path:{id:e}})),enabled:void 0!==e});return{...(0,o.S)(t),sbom:t.data}},h=(e,t)=>(0,n.n)({mutationFn:e=>(0,o.q)((0,c.bS)({client:s.S,path:{id:e}})),mutationKey:[d],onSuccess:t,onError:e}),y=()=>{const e=(0,r.jE)();return(0,i.v)({parallel:!0,uploadFn:(e,t)=>(0,m.J4)(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:[d]})}})},g=(e,t)=>(0,n.n)({mutationFn:e=>(0,o.q)((0,c.aB)({client:s.S,path:{id:e.id},body:e.labels})),mutationKey:[d],onSuccess:e,onError:t}),p=(e,t={})=>{const a=(0,l.I)({queryKey:[d,"by-package",e,t],queryFn:()=>(0,o.q)((0,c.m9)({client:s.S,query:{id:e,...(0,u.kd)(t)}}))});return{...(0,o.S)(a),result:{data:a.data?.items||[],total:a.data?.total??0,params:t}}}}}]);
//# sourceMappingURL=53.ebbb4b3e.min.js.map