"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[115],{17327:(e,t,a)=>{a.d(t,{E:()=>c,Z:()=>d});var l=a(34629),i=a(63696),r=a(53141),n=a(62634),s=a(1850);const c=i.createContext({cardId:"",registerTitleId:()=>{},isExpanded:!1,isClickable:!1,isSelectable:!1,isSelected:!1,isClicked:!1,isDisabled:!1}),d=e=>{var{children:t,id:a="",className:o,component:m="div",isCompact:p=!1,isSelectable:u=!1,isClickable:f=!1,isDisabled:v=!1,isSelectableRaised:b=!1,isSelected:E=!1,isClicked:g=!1,isDisabledRaised:h=!1,isFlat:y=!1,isExpanded:C=!1,isRounded:x=!1,isLarge:A=!1,isFullHeight:S=!1,isPlain:T=!1,ouiaId:_,ouiaSafe:I=!0,hasSelectableInput:k=!1,selectableInputAriaLabel:w,onSelectableInputChange:P=(()=>{})}=e,N=(0,l.__rest)(e,["children","id","className","component","isCompact","isSelectable","isClickable","isDisabled","isSelectableRaised","isSelected","isClicked","isDisabledRaised","isFlat","isExpanded","isRounded","isLarge","isFullHeight","isPlain","ouiaId","ouiaSafe","hasSelectableInput","selectableInputAriaLabel","onSelectableInputChange"]);const R=m,L=(0,s.iK)(d.displayName,_,I),[F,K]=i.useState(""),[H,D]=i.useState();p&&A&&(console.warn("Card: Cannot use isCompact with isLarge. Defaulting to isCompact"),A=!1);const O=i.useRef(!1);return i.useEffect((()=>{w?D({"aria-label":w}):F?D({"aria-labelledby":F}):k&&!O.current&&(D({}),console.warn("If no CardTitle component is passed as a child of Card the selectableInputAriaLabel prop must be passed"))}),[k,w,F]),i.createElement(c.Provider,{value:{cardId:a,registerTitleId:e=>{K(e),O.current=!!e},isExpanded:C,isClickable:f,isSelectable:u,isSelected:E,isClicked:g,isDisabled:v,hasSelectableInput:k}},k&&i.createElement("input",Object.assign({className:"pf-v5-screen-reader",id:`${a}-input`},H,{type:"checkbox",checked:E,onChange:e=>P(e,a),disabled:h,tabIndex:-1})),i.createElement(R,Object.assign({id:a,className:(0,n.A)(r.A.card,p&&r.A.modifiers.compact,C&&r.A.modifiers.expanded,y&&r.A.modifiers.flat,x&&r.A.modifiers.rounded,A&&r.A.modifiers.displayLg,S&&r.A.modifiers.fullHeight,T&&r.A.modifiers.plain,h?(0,n.A)(r.A.modifiers.nonSelectableRaised):b?(0,n.A)(r.A.modifiers.selectableRaised,E&&r.A.modifiers.selectedRaised):u&&f?(0,n.A)(r.A.modifiers.selectable,r.A.modifiers.clickable,(E||g)&&r.A.modifiers.current):u?(0,n.A)(r.A.modifiers.selectable,E&&r.A.modifiers.selected):f?(0,n.A)(r.A.modifiers.clickable,g&&r.A.modifiers.current):"",v&&r.A.modifiers.disabled,o),tabIndex:b?"0":void 0},N,L),t))};d.displayName="Card"},71603:(e,t,a)=>{a.d(t,{b:()=>s});var l=a(34629),i=a(63696),r=a(53141),n=a(62634);const s=e=>{var{children:t,className:a,component:s="div",isFilled:c=!0}=e,d=(0,l.__rest)(e,["children","className","component","isFilled"]);const o=s;return i.createElement(o,Object.assign({className:(0,n.A)(r.A.cardBody,!c&&r.A.modifiers.noFill,a)},d),t)};s.displayName="CardBody"},64361:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(34629),i=a(63696),r=a(62634),n=a(53141),s=a(17327);const c=e=>{var{children:t,className:a,component:c="div"}=e,d=(0,l.__rest)(e,["children","className","component"]);const{cardId:o,registerTitleId:m}=i.useContext(s.E),p=c,u=o?`${o}-title`:"";return i.useEffect((()=>(m(u),()=>m(""))),[m,u]),i.createElement("div",{className:(0,r.A)(n.A.cardTitle)},i.createElement(p,Object.assign({className:(0,r.A)(n.A.cardTitleText,a),id:u||void 0},d),t))};c.displayName="CardTitle"},93914:(e,t,a)=>{a.d(t,{Ay:()=>l});const l=(0,a(32791).w)({name:"ShieldAltIcon",height:512,width:512,svgPath:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z",yOffset:0,xOffset:0})},8742:(e,t,a)=>{a.d(t,{u:()=>l});const l={name:"--pf-v5-global--danger-color--100",value:"#c9190b",var:"var(--pf-v5-global--danger-color--100)"}},19174:(e,t,a)=>{a.d(t,{n:()=>l});const l={name:"--pf-v5-global--info-color--100",value:"#2b9af3",var:"var(--pf-v5-global--info-color--100)"}},44304:(e,t,a)=>{a.d(t,{p:()=>l});const l={name:"--pf-v5-global--palette--black-400",value:"#b8bbbe",var:"var(--pf-v5-global--palette--black-400)"}},53359:(e,t,a)=>{a.d(t,{c:()=>l});const l={name:"--pf-v5-global--palette--purple-400",value:"#8476d1",var:"var(--pf-v5-global--palette--purple-400)"}},53820:(e,t,a)=>{a.d(t,{H:()=>l});const l={name:"--pf-v5-global--warning-color--100",value:"#f0ab00",var:"var(--pf-v5-global--warning-color--100)"}},24813:(e,t,a)=>{a.d(t,{A:()=>h});var l=a(1180),i=a(28341),r=a(73401),n=a(64335),s=a(57311),c=a(73220),d=a(99205),o=a(68986),m=a(33364),p=a(94279),u=a(16172),f=a(63696),v=a(56279),b=a(84608),E=a(341),g=a(77307);const h=({isExpanded:e,uploads:t,onCloseClick:a,handleUpload:h,handleRemoveUpload:y,extractSuccessMessage:C,extractErrorMessage:x})=>{const[A,S]=f.useState(!1),[T,_]=f.useState("inProgress"),[I,k]=f.useState([]);!A&&t.size>0&&S(!0),f.useEffect((()=>{const e=Array.from(t.values());e.some((e=>"inProgress"===e.status))?_("inProgress"):e.every((e=>"complete"===e.status))?_("success"):_("danger")}),[t]);const w=Array.from(t.values()).filter((e=>e.response)).length;return f.createElement(g.q,{isExpanded:e,onCloseClick:a,pageKey:"upload-files",drawerPanelContentProps:{defaultSize:"600px"},header:f.createElement(l.n,null,f.createElement(i.h,{headingLevel:"h2",size:"lg",className:E.A.mtXs},"Upload files"))},f.createElement(r.w,{onFileDrop:(e,t)=>{h(t)},dropzoneProps:{accept:{"application/xml":[".json"]},onDropRejected:e=>{k(e)}},isHorizontal:!0},f.createElement(n.x,{titleIcon:f.createElement(b.Ay,null),titleText:"Drag and drop files here",titleTextSeparator:"or",infoText:"Accepted file types: JSON"}),A&&f.createElement(s.y,{statusToggleText:`${w} of ${t.size} files uploaded`,statusToggleIcon:T},Array.from(t.entries()).map((([e,t],a)=>f.createElement(c.L,{fileIcon:f.createElement(v.Ay,null),file:e,key:`${e.name}-${a}`,onClearClick:()=>{[e].forEach((e=>{y(e)}))},progressValue:t.progress,progressVariant:t.error?"danger":t.response?"success":void 0,progressHelperText:t.error?f.createElement(d.E,{isLiveRegion:!0},f.createElement(o.j,{variant:"error"},x(t.error))):t.response?f.createElement(d.E,{isLiveRegion:!0},f.createElement(o.j,{variant:"default"},C(t.response))):void 0})))),f.createElement(m.a,{isOpen:I.length>0,title:"Unsupported files",titleIconVariant:"warning",showClose:!0,"aria-label":"unsupported file upload attempted",onClose:()=>k([]),variant:"small"},f.createElement(p.B8,null,I.map(((e,t)=>f.createElement(u.c,{key:t},e.file.name)))))))}},63095:(e,t,a)=>{a.d(t,{w:()=>r});var l=a(63696),i=a(50705);const r=e=>{const{pushNotification:t}=l.useContext(i.K);return(a,l)=>{let i="";i="string"==typeof e?e:e(a,l),t({title:i,variant:"danger"})}}},63195:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var l=a(63696),i=a(49348),r=a(68430),n=a(1180),s=a(72785),c=a(20653),d=a(35048),o=a(4433),m=a(77635),p=a(38914),u=a(57901),f=a(76072),v=a(97299),b=a(17327),E=a(64361),g=a(71603),h=a(85578),y=a(16646),C=a(31065),x=a(77819),A=a(28516),S=a(3629),T=a(62101),_=a(38139),I=a(86820),k=a(33273),w=a(1349),P=a(62520),N=a(24813),R=a(70611),L=a(23713),F=a(5098),K=a(69935),H=a(67837),D=a(52302),O=a(85278),j=a(50705),M=a(80254),Z=a(88112),U=a(32343),$=a(28338),z=a(70045),B=a(9369),V=a(55399),G=a(86099);const J=({severities:e})=>{const t=Object.values(e).reduce(((e,t)=>e+t),0);return l.createElement($.s,{spaceItems:{default:"spaceItemsSm"},alignItems:{default:"alignItemsCenter"},flexWrap:{default:"nowrap"},style:{whiteSpace:"nowrap"}},l.createElement(z.Z,{style:{minWidth:15,textAlign:G.pG}},t),l.createElement(B.c,{orientation:{default:"vertical"}}),l.createElement(z.Z,null,l.createElement($.s,null,Object.entries(e).filter((([e,t])=>t>0)).sort((0,V.S)((([e,t])=>e))).reverse().map((([e,t],a)=>l.createElement(z.Z,{key:a,spacer:{default:"spacerXs"}},l.createElement($.s,{spaceItems:{default:"spaceItemsXs"},alignItems:{default:"alignItemsCenter"},flexWrap:{default:"nowrap"},style:{whiteSpace:"nowrap"}},l.createElement(z.Z,null,l.createElement(D.h,{value:e,hideLabel:!0})),l.createElement(z.Z,null,t))))))))},W={none:0,low:0,medium:0,high:0,critical:0},X=({vulnerabilities:e})=>{const t=e.reduce(((e,t)=>({...e,[t.severity]:e[t.severity]+1})),W);return l.createElement(J,{severities:t})};var q=a(63095);const Y=()=>{const{pushNotification:e}=l.useContext(j.K),[t,a]=l.useState(!1),{uploads:$,handleUpload:z,handleRemoveUpload:B}=(0,K.Yu)(),[V,G]=l.useState(null),[J,W]=l.useState(null),{mutate:Y}=(0,K.uJ)((()=>{}),(t=>{e({title:"Error while updating labels",variant:"danger"})})),Q=(0,R.MM)({tableName:"advisories",persistenceKeyPrefix:I.rt.advisories,columnNames:{identifier:"Identifier",title:"Title",severity:"Severity",labels:"Labels",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["identifier","severity"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:k.RJ.search},{categoryKey:"average_severity",title:"Severity",placeholderText:"Severity",type:k.RJ.multiselect,selectOptions:[{value:"none",label:"None"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}]}],isExpansionEnabled:!0,expandableVariant:"compound"}),{result:{data:ee,total:te},isFetching:ae,fetchError:le}=(0,K.VH)((0,R.Ng)({...Q,hubSortFieldKeys:{identifier:"identifier",severity:"average_score"}})),ie=(0,K.ni)((0,q.w)("Error occurred while deleting the advisory")),re=(0,R.PB)({...Q,idProperty:"uuid",currentPageItems:ee,totalItemCount:te,isLoading:ae,selectionState:(0,F.$)({items:ee,isEqual:(e,t)=>e.identifier===t.identifier})}),{numRenderedColumns:ne,currentPageItems:se,propHelpers:{toolbarProps:ce,filterToolbarProps:de,paginationToolbarItemProps:oe,paginationProps:me,tableProps:pe,getThProps:ue,getTrProps:fe,getTdProps:ve,getExpandedContentTdProps:be},expansionDerivedState:{isCellExpanded:Ee}}=re,{downloadAdvisory:ge}=(0,L.m)();return l.createElement(l.Fragment,null,l.createElement(r.d8,{variant:r.zC.light},l.createElement(n.n,null,l.createElement(s.E,{component:"h1"},"Advisories"))),l.createElement(r.d8,null,l.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},l.createElement(c.M,{...ce},l.createElement(d.P,null,l.createElement(k.Us,{showFiltersSideBySide:!0,...de}),l.createElement(o.T,null,l.createElement(m.$n,{type:"button",id:"upload","aria-label":"Upload",variant:"secondary",onClick:()=>a(!0)},"Upload")),l.createElement(o.T,{...oe},l.createElement(w.n,{idPrefix:"advisory-table",isTop:!0,paginationProps:me})))),l.createElement(h.X,{...pe,"aria-label":"Advisory table",className:"vertical-middle-aligned-table"},l.createElement(y.d,null,l.createElement(C.Tr,null,l.createElement(P.Ze,{...re},l.createElement(x.Th,{...ue({columnKey:"identifier"})}),l.createElement(x.Th,{...ue({columnKey:"title"})}),l.createElement(x.Th,{...ue({columnKey:"severity"})}),l.createElement(x.Th,{...ue({columnKey:"labels"})}),l.createElement(x.Th,{...ue({columnKey:"vulnerabilities"})})))),l.createElement(P.nJ,{isLoading:ae,isError:!!le,isNoData:0===te,numRenderedColumns:ne},se.map(((e,t)=>l.createElement(A.N,{key:e.identifier,isExpanded:Ee(e)},l.createElement(C.Tr,{...fe({item:e})},l.createElement(P.Oi,{...re,item:e,rowIndex:t},l.createElement(S.Td,{width:15,...ve({columnKey:"identifier",isCompoundExpandToggle:!0,item:e,rowIndex:t})},l.createElement(i.k2,{to:`/advisories/${e.uuid}`},e.identifier)),l.createElement(S.Td,{width:40,modifier:"breakWord",...ve({columnKey:"title"})},e.title),l.createElement(S.Td,{width:10,modifier:"truncate",...ve({columnKey:"severity"})},e.average_severity&&l.createElement(D.h,{value:e.average_severity})),l.createElement(S.Td,{width:25,modifier:"truncate",...ve({columnKey:"labels"})},e.labels&&l.createElement(H.g,{value:e.labels})),l.createElement(S.Td,{width:10,modifier:"truncate",...ve({columnKey:"vulnerabilities",isCompoundExpandToggle:!0,item:e,rowIndex:t})},e.vulnerabilities&&l.createElement(X,{vulnerabilities:e.vulnerabilities})),l.createElement(S.Td,{isActionCell:!0},l.createElement(T.G,{items:[{title:"Edit labels",onClick:()=>{var t;t=e,G("editLabels"),W(t)}},{title:"Download",onClick:()=>{ge(e.uuid,`${e.identifier}.json`)}},{title:"Delete",onClick:()=>ie.mutate(e.uuid)}]})))),Ee(e)?l.createElement(C.Tr,{isExpanded:!0},l.createElement(S.Td,{...be({item:e})},l.createElement(_.g,null,l.createElement("div",{className:"pf-v5-u-m-md"},Ee(e,"identifier")?l.createElement(l.Fragment,null,l.createElement(p.B,{hasGutter:!0},l.createElement(u.a,null,l.createElement(f.x,{hasGutter:!0},l.createElement(v.E,{md:6},l.createElement(b.Z,{isFullHeight:!0,isCompact:!0},l.createElement(E.Z,null,"General view"),l.createElement(g.b,null,l.createElement(M.V,{advisory:e,excludedFields:["title"],descriptionListProps:{columnModifier:{default:"2Col"}}})))),l.createElement(v.E,{md:6},l.createElement(b.Z,{isFullHeight:!0,isCompact:!0},l.createElement(E.Z,null,"Issuer"),l.createElement(g.b,null,l.createElement(Z.N,{value:e})))))))):null,Ee(e,"vulnerabilities")?l.createElement(l.Fragment,null,e.vulnerabilities&&l.createElement(U.j,{variant:"compact",vulnerabilities:e.vulnerabilities})):null)))):null))))),l.createElement(w.n,{idPrefix:"advisories-table",isTop:!1,isCompact:!0,paginationProps:me}))),l.createElement(N.A,{isExpanded:t,uploads:$,handleUpload:z,handleRemoveUpload:B,extractSuccessMessage:e=>`${e.data.document_id} uploaded`,extractErrorMessage:e=>e.response?.data?e.message:"Error while uploading file",onCloseClick:()=>a(!1)}),"editLabels"===V&&J&&l.createElement(O.x,{resourceName:J.identifier,value:J.labels??{},onSave:e=>{((e,t)=>{Y({...e,labels:t})})(J,e),W(null),G(null)},onClose:()=>G(null)}))}},53141:(e,t,a)=>{a.d(t,{A:()=>l});const l={card:"pf-v5-c-card",cardActions:"pf-v5-c-card__actions",cardBody:"pf-v5-c-card__body",cardExpandableContent:"pf-v5-c-card__expandable-content",cardFooter:"pf-v5-c-card__footer",cardHeader:"pf-v5-c-card__header",cardHeaderMain:"pf-v5-c-card__header-main",cardHeaderToggle:"pf-v5-c-card__header-toggle",cardHeaderToggleIcon:"pf-v5-c-card__header-toggle-icon",cardSelectableActions:"pf-v5-c-card__selectable-actions",cardSrInput:"pf-v5-c-card__sr-input",cardTitle:"pf-v5-c-card__title",cardTitleText:"pf-v5-c-card__title-text",check:"pf-v5-c-check",checkInput:"pf-v5-c-check__input",checkLabel:"pf-v5-c-check__label",dirRtl:"pf-v5-m-dir-rtl",divider:"pf-v5-c-divider",modifiers:{selectable:"pf-m-selectable",clickable:"pf-m-clickable",selected:"pf-m-selected",current:"pf-m-current",disabled:"pf-m-disabled",hoverableRaised:"pf-m-hoverable-raised",selectableRaised:"pf-m-selectable-raised",nonSelectableRaised:"pf-m-non-selectable-raised",selectedRaised:"pf-m-selected-raised",compact:"pf-m-compact",displayLg:"pf-m-display-lg",flat:"pf-m-flat",plain:"pf-m-plain",rounded:"pf-m-rounded",expanded:"pf-m-expanded",fullHeight:"pf-m-full-height",toggleRight:"pf-m-toggle-right",noOffset:"pf-m-no-offset",noFill:"pf-m-no-fill"},radio:"pf-v5-c-radio",radioInput:"pf-v5-c-radio__input",radioLabel:"pf-v5-c-radio__label",themeDark:"pf-v5-theme-dark"}}}]);
//# sourceMappingURL=115.d3246679.min.js.map