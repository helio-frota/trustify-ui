"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[168],{63095:(t,e,r)=>{r.d(e,{w:()=>i});var n=r(63696),s=r(50705);const i=t=>{const{pushNotification:e}=n.useContext(s.K);return(r,n)=>{let s="";s="string"==typeof t?t:t(r,n),e({title:s,variant:"danger"})}}},57772:(t,e,r)=>{r.r(e),r.d(e,{default:()=>q});var n=r(63696),s=r(49348),i=r(68430),a=r(1180),o=r(72785),u=r(20653),l=r(35048),c=r(4433),d=r(85578),h=r(16646),m=r(31065),p=r(77819),E=r(28516),y=r(3629),g=r(62101),b=r(86820),v=r(33273),f=r(1349),P=r(62520),C=r(70611),M=r(5098),S=r(7616),O=r(6841),T=r(40752),K=r(77347);var x=r(4628),R=r(63095);const q=()=>{const{result:t}=((t={},e=!1)=>{const r=(0,S.I)({queryKey:["organizations",t],queryFn:()=>(0,O.q)((0,T.J3)({client:K.S,query:{...(0,C.kd)(t)}})),refetchInterval:!e&&5e3});return{...(0,O.S)(r),result:{data:r.data?.items||[],total:r.data?.total??0,params:t}}})({page:{pageNumber:1,itemsPerPage:1e3}}),e=(0,C.MM)({tableName:"products",persistenceKeyPrefix:b.rt.advisories,columnNames:{name:"Name",vendor:"Vendor",versions:"Versions"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:v.RJ.search},{categoryKey:"organization",title:"Organization",placeholderText:"Organization",type:v.RJ.multiselect,selectOptions:[...(t.data??[]).map((t=>({value:t.id,label:t.name})))]}],isExpansionEnabled:!1}),{result:{data:r,total:q},isFetching:w,fetchError:k}=(0,x.M3)((0,C.Ng)({...e,hubSortFieldKeys:{name:"name"}})),F=(0,x.lY)((0,R.w)("Error occurred while deleting the product")),I=(0,C.PB)({...e,idProperty:"id",currentPageItems:r,totalItemCount:q,isLoading:w,selectionState:(0,M.$)({items:r,isEqual:(t,e)=>t.id===e.id})}),{numRenderedColumns:N,currentPageItems:_,propHelpers:{toolbarProps:z,filterToolbarProps:D,paginationToolbarItemProps:L,paginationProps:J,tableProps:U,getThProps:j,getTrProps:B,getTdProps:V,getExpandedContentTdProps:$},expansionDerivedState:{isCellExpanded:A}}=I;return n.createElement(n.Fragment,null,n.createElement(i.d8,{variant:i.zC.light},n.createElement(a.n,null,n.createElement(o.E,{component:"h1"},"Products"))),n.createElement(i.d8,null,n.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},n.createElement(u.M,{...z},n.createElement(l.P,null,n.createElement(v.Us,{showFiltersSideBySide:!0,...D}),n.createElement(c.T,{...L},n.createElement(f.n,{idPrefix:"product-table",isTop:!0,paginationProps:J})))),n.createElement(d.X,{...U,"aria-label":"Product table"},n.createElement(h.d,null,n.createElement(m.Tr,null,n.createElement(P.Ze,{...I},n.createElement(p.Th,{...j({columnKey:"name"})}),n.createElement(p.Th,{...j({columnKey:"vendor"})}),n.createElement(p.Th,{...j({columnKey:"versions"})})))),n.createElement(P.nJ,{isLoading:w,isError:!!k,isNoData:0===q,numRenderedColumns:N},_.map(((t,e)=>n.createElement(E.N,{key:t.id,isExpanded:A(t)},n.createElement(m.Tr,{...B({item:t})},n.createElement(P.Oi,{...I,item:t,rowIndex:e},n.createElement(y.Td,{width:30,...V({columnKey:"name"})},n.createElement(s.k2,{to:`/products/${t.id}`},t.name)),n.createElement(y.Td,{width:50,modifier:"truncate",...V({columnKey:"vendor"})},t.vendor?.name),n.createElement(y.Td,{width:20,modifier:"truncate",...V({columnKey:"versions"})},t.versions?.length),n.createElement(y.Td,{isActionCell:!0},n.createElement(g.G,{items:[{title:"Delete",onClick:()=>F.mutate(t.id)}]}))))))))),n.createElement(f.n,{idPrefix:"product-table",isTop:!1,isCompact:!0,paginationProps:J}))))}},6841:(t,e,r)=>{r.d(e,{S:()=>s,q:()=>n});const n=async t=>(await t).data,s=t=>({isFetching:t.isLoading,fetchError:t.error,refetch:t.refetch})},4628:(t,e,r)=>{r.d(e,{M3:()=>c,Vh:()=>d,lY:()=>h});var n=r(7616),s=r(26667),i=r(40752),a=r(77347),o=r(6841),u=r(70611);const l="products",c=(t={},e=!1)=>{const r=(0,n.I)({queryKey:[l,t],queryFn:()=>(0,o.q)((0,i.Pt)({client:a.S,query:{...(0,u.kd)(t)}})),refetchInterval:!e&&5e3});return{...(0,o.S)(r),result:{data:r.data?.items||[],total:r.data?.total??0,params:t}}},d=t=>{const e=(0,n.I)({queryKey:[l,t],queryFn:()=>(0,o.q)((0,i.oo)({client:a.S,path:{id:t}}))});return{...(0,o.S)(e),product:e.data}},h=(t,e)=>(0,s.n)({mutationFn:t=>(0,o.q)((0,i.DD)({client:a.S,path:{id:t}})),mutationKey:[l],onSuccess:e,onError:t})},26667:(t,e,r)=>{r.d(e,{n:()=>d});var n=r(63696),s=r(9304),i=r(13403),a=r(47794),o=r(19106),u=class extends a.Q{#t;#e=void 0;#r;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():"pending"===this.#r?.state.status&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(t,e){return this.#n=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??(0,s.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#i(t){i.j.batch((()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,r=this.#e.context;"success"===t?.type?(this.#n.onSuccess?.(t.data,e,r),this.#n.onSettled?.(t.data,null,e,r)):"error"===t?.type&&(this.#n.onError?.(t.error,e,r),this.#n.onSettled?.(void 0,t.error,e,r))}this.listeners.forEach((t=>{t(this.#e)}))}))}},l=r(3715),c=r(908);function d(t,e){const r=(0,l.jE)(e),[s]=n.useState((()=>new u(r,t)));n.useEffect((()=>{s.setOptions(t)}),[s,t]);const a=n.useSyncExternalStore(n.useCallback((t=>s.subscribe(i.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=n.useCallback(((t,e)=>{s.mutate(t,e).catch(c.l)}),[s]);if(a.error&&(0,c.G)(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=168.e96c1ae0.min.js.map